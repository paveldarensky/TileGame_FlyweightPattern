# üéÆ TileGame_FlyweightPattern

2D tile-based game demonstrating the **Flyweight** structural design pattern for memory optimization.  
2D –∏–≥—Ä–∞ —Å —Ç–∞–π–ª–æ–≤–æ–π –∫–∞—Ä—Ç–æ–π, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∞—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ **¬´–ü—Ä–∏—Å–ø–æ—Å–æ–±–ª–µ–Ω–µ—Ü¬ª** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏.

---

## üìå About / –û –ø—Ä–æ–µ–∫—Ç–µ

üéì Developed as part of an Object-Oriented Analysis and Design (OOAD) course.  
üí° Implements **Flyweight** to drastically reduce memory usage by reusing shared objects.  
üåç Supports multiple map themes and unique player characters.  
üñ• Written in **C# WinForms**.

üéì –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –≤ —Ä–∞–º–∫–∞—Ö –∫—É—Ä—Å–∞ –ø–æ –û–û–ê–ü.  
üí° –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–∞—Ç—Ç–µ—Ä–Ω **¬´–ü—Ä–∏—Å–ø–æ—Å–æ–±–ª–µ–Ω–µ—Ü¬ª** –¥–ª—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Å–Ω–∏–∂–µ–Ω–∏—è –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –∑–∞ —Å—á—ë—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–∞–∑–¥–µ–ª—è–µ–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤.  
üåç –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–∞—Ä—Ç –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π.  
üñ• –ù–∞–ø–∏—Å–∞–Ω–æ –Ω–∞ **C# WinForms**.

---

## üîß Problem & Solution / –ü—Ä–æ–±–ª–µ–º–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ

### ‚ùå Initial problem / –ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞
- –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (—Ç–∞–π–ª–æ–≤), –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Ö—Ä–∞–Ω–∏–ª —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Ç–µ–∫—Å—Ç—É—Ä—É.  
- –ö–∞–∂–¥—ã–π –ø–µ—Ä—Å–æ–Ω–∞–∂ —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –∫–∞–∫ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç —Å–æ —Å–≤–æ–∏–º —Å–∫–∏–Ω–æ–º, –¥–∞–∂–µ –µ—Å–ª–∏ —Å–∫–∏–Ω –ø–æ–≤—Ç–æ—Ä—è–ª—Å—è.  
- –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ **–∏–∑–±—ã—Ç–æ—á–Ω–æ–º—É –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—é –ø–∞–º—è—Ç–∏** –∏ –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ –Ω–∞ —Å–∏—Å—Ç–µ–º—É –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–æ–ª—å—à–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∏–≥—Ä–æ–∫–æ–≤.

### ‚úÖ Applied solution / –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω **–ø–∞—Ç—Ç–µ—Ä–Ω "–ü—Ä–∏—Å–ø–æ—Å–æ–±–ª–µ–Ω–µ—Ü" (Flyweight)** –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è **–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è** (—Ä–∞–∑–¥–µ–ª—è–µ–º–æ–≥–æ) –∏ **–≤–Ω–µ—à–Ω–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è** (–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ).  
- –°–æ–∑–¥–∞–Ω—ã —Ñ–∞–±—Ä–∏–∫–∏:
  - **TileFactory** ‚Äî —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ–º –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç–µ–∫—Å—Ç—É—Ä –∫–ª–µ—Ç–æ–∫.
  - **CharacterFactory** ‚Äî —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ–º –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–∫–∏–Ω–æ–≤ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π.
- –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (—Ç–µ–∫—Å—Ç—É—Ä–∞ –∏–ª–∏ —Å–∫–∏–Ω) —Ö—Ä–∞–Ω–∏—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.  
- –í–Ω–µ—à–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –∏–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞, —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—è –¥–≤–∏–∂–µ–Ω–∏—è) —Ö—Ä–∞–Ω–∏—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞.

---

## üéØ Features / –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üó∫ **Multiple map types** ‚Äî forest, desert, cave, city  
  –ù–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤ –∫–∞—Ä—Ç: –ª–µ—Å, –ø—É—Å—Ç—ã–Ω—è, –ø–µ—â–µ—Ä–∞, –≥–æ—Ä–æ–¥
- üß© **Flyweight pattern** for tiles and characters  
  –ü–∞—Ç—Ç–µ—Ä–Ω ¬´–ü—Ä–∏—Å–ø–æ—Å–æ–±–ª–µ–Ω–µ—Ü¬ª –¥–ª—è —Ç–∞–π–ª–æ–≤ –∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- üìâ **Memory optimization** ‚Äî minimizing the number of unique objects  
  –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ ‚Äî –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- üé® **Reusable textures and skins** ‚Äî shared objects loaded once  
  –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç—É—Ä –∏ —Å–∫–∏–Ω–æ–≤ ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –æ–¥–∏–Ω —Ä–∞–∑
- üß† **Separated state management** ‚Äî internal/external state division  
  –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –∏ –≤–Ω–µ—à–Ω–µ–µ
- üöÄ **Performance boost** on large maps and many players  
  –£—Å–∫–æ—Ä–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –Ω–∞ –±–æ–ª—å—à–∏—Ö –∫–∞—Ä—Ç–∞—Ö –∏ –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ –∏–≥—Ä–æ–∫–æ–≤
- üñ• **WinForms-based game UI** with real-time rendering  
  –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–≥—Ä—ã –Ω–∞ WinForms —Å –æ—Ç—Ä–∏—Å–æ–≤–∫–æ–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

## üìÅ Structure / –°—Ç—Ä—É–∫—Ç—É—Ä–∞

### Tiles (Map Cells) / –¢–∞–π–ª—ã (–ö–ª–µ—Ç–∫–∏ –∫–∞—Ä—Ç—ã)
- `Tile` ‚Äî abstract base class (image + Draw method)  
  –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å (—Ç–µ–∫—Å—Ç—É—Ä–∞ + –º–µ—Ç–æ–¥ Draw)
- Concrete tiles:  
  - Forest: `GrassTile`, `BushTile`, `MushroomTile`  
  - Desert: `MoonSandTile`, `MoonStoneTile`, `CactusTile`  
  - Cave: `StoneTile`, `CoalTile`, `CrystalTile`  
  - City: `TileTile`, `RadioTile`, `RobotTile`
- `TileFactory` ‚Äî creates and reuses shared tile textures

### Characters / –ü–µ—Ä—Å–æ–Ω–∞–∂–∏
- `Character` ‚Äî abstract base class (abstract `Operation`)  
  –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å (–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥ `Operation`)
- `SharedCharacter` ‚Äî shared part (skin image)  
  –†–∞–∑–¥–µ–ª—è–µ–º–∞—è —á–∞—Å—Ç—å (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–∫–∏–Ω–∞)
- `UnsharedCharacter` ‚Äî unique part (name, coordinates, trajectory)  
  –£–Ω–∏–∫–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å (–∏–º—è, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—è)
- `CharacterFactory` ‚Äî creates and reuses shared skins

### Client / –ö–ª–∏–µ–Ω—Ç
- `MainForm` ‚Äî game logic, map generation, character creation  
  –õ–æ–≥–∏–∫–∞ –∏–≥—Ä—ã, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç—ã, —Å–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π

---

## üìä Results / –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

- –°—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏.
- –ü–æ–≤—ã—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –∫–∞—Ä—Ç—ã.
- –õ—ë–≥–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∫–∞—Ä—Ç —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –æ–±—ä–µ–∫—Ç–æ–≤.

**Example effect / –ü—Ä–∏–º–µ—Ä —ç—Ñ—Ñ–µ–∫—Ç–∞:**  
üìà –î–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞: –∫–∞–∂–¥–æ–µ –ø–æ–ª–µ –∏ –∫–∞–∂–¥—ã–π –ø–µ—Ä—Å–æ–Ω–∞–∂ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å —É–Ω–∏–∫–∞–ª—å–Ω–æ ‚Üí –±–æ–ª—å—à–æ–π —Ä–∞—Å—Ö–æ–¥ –ø–∞–º—è—Ç–∏.  
üìâ –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞: —Ç–µ–∫—Å—Ç—É—Ä—ã –∏ —Å–∫–∏–Ω—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è ‚Üí —ç–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑.

## üñº Screenshots / –°–∫—Ä–∏–Ω—à–æ—Ç—ã

![–î–∏–∞–≥—Ä–∞–º–º–∞](images/diagramm.png)  
*–†–∏—Å. 1 ‚Äî –ü–∞—Ç—Ç–µ—Ä–Ω ¬´–ü—Ä–∏—Å–ø–æ—Å–æ–±–ª–µ–Ω–µ—Ü¬ª –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã*

![–ü—Ä–æ–≥—Ä–∞–º–º–∞](images/application.png)  
*–†–∏—Å. 2 ‚Äî –ì–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ–≥—Ä–∞–º–º—ã*


---
